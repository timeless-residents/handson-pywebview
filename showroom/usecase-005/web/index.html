<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Task Manager</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Flatpickr (Date Picker) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>
</head>

<body>
    <div class="app-container">
        <header>
            <h1>Task Manager</h1>
            <div class="header-actions">
                <button id="addTaskBtn" class="primary-btn">
                    <span class="material-icons">add</span>タスクを追加
                </button>
                <button id="manageCategoriesBtn" class="secondary-btn">
                    <span class="material-icons">category</span>カテゴリー管理
                </button>
            </div>
        </header>

        <div class="filters">
            <div class="filter-group">
                <label for="filterCategory">カテゴリー:</label>
                <select id="filterCategory">
                    <option value="all">すべて</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filterPriority">優先度:</label>
                <select id="filterPriority">
                    <option value="all">すべて</option>
                    <option value="3">高</option>
                    <option value="2">中</option>
                    <option value="1">低</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filterStatus">状態:</label>
                <select id="filterStatus">
                    <option value="all">すべて</option>
                    <option value="active">未完了</option>
                    <option value="completed">完了</option>
                </select>
            </div>
            <div class="search-group">
                <input type="text" id="searchInput" placeholder="タスクを検索...">
                <button id="searchBtn">
                    <span class="material-icons">search</span>
                </button>
            </div>
        </div>

        <div class="tasks-container">
            <div id="tasksList"></div>
        </div>

        <!-- タスク追加・編集モーダル -->
        <div id="taskModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="taskModalTitle">タスクを追加</h2>
                    <span class="close-btn">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="taskForm">
                        <input type="hidden" id="taskId">
                        <div class="form-group">
                            <label for="taskTitle">タイトル:</label>
                            <input type="text" id="taskTitle" required>
                        </div>
                        <div class="form-group">
                            <label for="taskDescription">説明:</label>
                            <textarea id="taskDescription" rows="3"></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="taskCategory">カテゴリー:</label>
                                <select id="taskCategory"></select>
                            </div>
                            <div class="form-group">
                                <label for="taskPriority">優先度:</label>
                                <select id="taskPriority">
                                    <option value="3">高</option>
                                    <option value="2" selected>中</option>
                                    <option value="1">低</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="taskDueDate">締め切り:</label>
                            <input type="text" id="taskDueDate" placeholder="YYYY-MM-DD">
                        </div>
                        <div class="form-actions">
                            <button type="button" id="cancelTaskBtn" class="secondary-btn">キャンセル</button>
                            <button type="submit" id="saveTaskBtn" class="primary-btn">保存</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- カテゴリー管理モーダル -->
        <div id="categoryModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>カテゴリー管理</h2>
                    <span class="close-btn">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="categories-list" id="categoriesList"></div>
                    <form id="categoryForm">
                        <input type="hidden" id="categoryId">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="categoryName">カテゴリー名:</label>
                                <input type="text" id="categoryName" required>
                            </div>
                            <div class="form-group">
                                <label for="categoryColor">色:</label>
                                <input type="color" id="categoryColor" value="#9e9e9e">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" id="resetCategoryBtn" class="secondary-btn">リセット</button>
                            <button type="submit" id="saveCategoryBtn" class="primary-btn">保存</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- 通知モーダル -->
        <div id="notificationModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>締め切りのタスク</h2>
                    <span class="close-btn">&times;</span>
                </div>
                <div class="modal-body">
                    <div id="dueTasks"></div>
                </div>
                <div class="modal-footer">
                    <button id="closeNotificationBtn" class="primary-btn">閉じる</button>
                </div>
            </div>
        </div>

        <!-- 通知バッジ -->
        <div id="notification" class="hidden"></div>
    </div>

    <script src="js/script.js"></script>
</body>

</html>